language: generic

sudo: required
dist: trusty

addons:
  apt:
    sources:
      - sourceline: 'ppa:ubuntu-elisp/ppa'
    packages:
      - emacs
      - emacs-snapshot

env:
  - EMACS=emacs
  - EMACS=emacs-snapshot

matrix:
  allow_failures:
    # Daily Snapshot is not stable release (and other libs may not support)
    - env: EMACS=emacs-snapshot

install:
  - $EMACS --version
  - $EMACS --script script/package-install.el

script:
  - make compile test-lisp
  - make test-startup
